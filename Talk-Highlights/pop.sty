\NeedsTeXFormat{LaTeX2e}

\ProvidesPackage{pop}[2012/10/11]

\RequirePackage{ifthen}

\newboolean{bT}
\newboolean{bP}
\newboolean{bB}
\newboolean{bE}
\newboolean{bX}
\newboolean{bL}
\newboolean{bA}

\setboolean{bT}{false}
\setboolean{bP}{false}
\setboolean{bB}{false}
\setboolean{bE}{false}
\setboolean{bX}{false}
\setboolean{bL}{false}
\setboolean{bA}{false}

\DeclareOption{thm}{\setboolean{bT}{true}}

\DeclareOption{proof}{\setboolean{bP}{true}}

\DeclareOption{beamer}{\setboolean{bB}{true}}

\DeclareOption{en}{\setboolean{bE}{true}}

\DeclareOption{xy}{\setboolean{bX}{true}}

\DeclareOption{totomate}{\setboolean{bA}{true}}

\ProcessOptions


\RequirePackage[utf8]{inputenc}
\ifthenelse{\boolean{bE}}
  {\RequirePackage[english]{babel}}
  {\RequirePackage[french]{babel}}
  \RequirePackage[T1]{fontenc}
\RequirePackage{xspace}
\RequirePackage{makeidx}
\RequirePackage{array}
\RequirePackage{multirow}
\RequirePackage{graphicx}
\RequirePackage{amsmath}
\RequirePackage{amssymb}
%\RequirePackage{longtable}
\RequirePackage{mathtools}
\RequirePackage{xparse}



% \usepackage{savesym}
% \savesymbol{textlozenge}
% \usepackage{gfsartemisia-euler}
% \restoresymbol{EUL}{textlozenge}

% \usepackage[urw-garamond]{mathdesign}

\usepackage{cmbright}

  \RequirePackage{rotating}
%  \RequirePackage{etex}
  \RequirePackage{bibentry}
\DeclareMathAlphabet{\mathtt}{OT1}{txtt}{m}{n}

  \newcommand{\citef}[1]{\footnote{\bibentry{#1}}}
  \usetheme[secheader]{Boadilla}
  \usecolortheme{perso}
  \setbeamerfont{title in head/foot}{parent=structure,series=\bfseries}
  \setbeamerfont{section in head/foot}{parent=structure,series=\bfseries}
  %\setbeamerfont{subsection in head/foot}{}
  \makeatother
  \setbeamertemplate{footline}
  {
    \leavevmode%
    \hbox{%
      \begin{beamercolorbox}[wd=.3\paperwidth,ht=2.25ex,dp=1ex,center]{author in head/foot}%
        \usebeamerfont{author in head/foot}\insertshortauthor
      \end{beamercolorbox}%
      \begin{beamercolorbox}[wd=.4\paperwidth,ht=2.25ex,dp=1ex,center]{title in head/foot}%
        \usebeamerfont{title in head/foot}\insertshorttitle
      \end{beamercolorbox}%
      \begin{beamercolorbox}[wd=.3\paperwidth,ht=2.25ex,dp=1ex,center]{date in head/foot}%
        \usebeamerfont{date in head/foot}\insertframenumber{}/\inserttotalframenumber
      \end{beamercolorbox}}%
    \vskip0pt%
  }
  \makeatletter
  \setbeamertemplate{navigation symbols}{}
  \defbeamertemplate*{title page}{customized}[1][]{
    \centering
    \vspace{2cm}

    \usebeamerfont{title}\usebeamercolor[fg]{title}\inserttitle\par
    \bigskip
    \bigskip
    \usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}\insertsubtitle\par
    \bigskip
    \usebeamerfont{date}\insertdate\par
    \bigskip
    \bigskip
    \usebeamerfont{author}\insertauthor\par
    \usebeamerfont{institute}\insertinstitute\par
    \bigskip
    \vfill

    \usebeamercolor[fg]{titlegraphic}\inserttitlegraphic
  }
  % \defbeamertemplate*{part page}{customized}[1][]
  % {
  %   \begin{centering}
  %     {\usebeamerfont{part name}\usebeamercolor[fg]{subtitle}
  %       \partname~\insertromanpartnumber}
  %     \vskip1em\par
  %     \begin{center}
  %       \usebeamerfont{part title}%
  %       \usebeamercolor[fg]{title}\insertpart
  %     \end{center}
  %     % \begin{beamercolorbox}[sep=8pt,center,#1]{title}
  %     %   \usebeamerfont{part title}\usebeamercolor[fg]{title}\insertpart\par
  %     % \end{beamercolorbox}
  %   \end{centering}
  % }
  \definecolor{basecolor}{rgb}{0.31,0.54,0.98}
  \newcommand\imgback[2]{
    \setbeamertemplate{background canvas}{
      \vbox to \paperheight{\vfil\hbox to \paperwidth{\hfil\includegraphics[height=50ex]{#1}\hfil}\vfil}
    }
    #2
    \setbeamertemplate{background canvas}[default]
  }


  \newcommand\sectionp[2][]
  {
    \ifthenelse { \equal {#1} {} } 
    {\section{#2}}
    {\section[#1]{#2}}
    \begin{frame}{\ifthenelse{\boolean{bE}}{Outline}{Plan}}
      %\frametitle{Plan}
      \tableofcontents[currentsection]
    \end{frame}
  }

  \makeatletter
  \AtBeginPart{%
    \beamer@tocsectionnumber=0\relax
    \setcounter{section}{0}
    \frame{\partpage}%
  }
  \makeatother
 % \DeclareDocumentCommand\switch{r<> m r<> m }{
 %  \setbox0\hbox
 %  {\onslide<#1 >{#2}}
 %  \rlap{\hbox to \wd0{\hss
 %      {\onslide<#3 >{#4}\hss}}}\box0
 %  }


  \newsavebox\maboiteA\newsavebox\maboiteB\newsavebox\maboiteC
  \DeclareDocumentCommand\switch{ o r<> m r<> m }{
    \sbox\maboiteA{#3}%
    \sbox\maboiteB{#5}%
    \sbox\maboiteC{}%
    \only<#2>{%
      \rlap{\usebox\maboiteA}%
      \hbox{\vphantom{\usebox\maboiteA\usebox\maboiteB}}%
      \hbox{%
        \hphantom{%
          \rule
          {\maxof{\widthof{\usebox\maboiteB}}
            {\widthof{\usebox\maboiteA}}}
          {1pt}}}
    }%
    \only<#4>{%
      \rlap{\usebox\maboiteB}%
      \hbox{\vphantom{\usebox\maboiteA\usebox\maboiteB}}%
      \hbox{%
        \hphantom{%
          \rule
          {\maxof{\widthof{\usebox\maboiteB}}
            {\widthof{\usebox\maboiteA}}}
          {1pt}}}
    }%
    \IfNoValueF{#1}{%
      \only<#1>{%
        \rlap{\usebox\maboiteC}%
        \hbox{\vphantom{\usebox\maboiteA\usebox\maboiteB}}%
        \hbox{%
          \hphantom{%
            \rule
            {\maxof{\widthof{\usebox\maboiteB}}
              {\widthof{\usebox\maboiteA}}}
            {1pt}}
        }%
      }%
    }
  }
  \DeclareDocumentCommand\Only{ r<> r<> m }{
    \switch<#2>{#3}<#1>{}
  }

  \newcommand\pasmontrer[1]{{\color{white}#1}}
  
  \ifthenelse{\boolean{bX}}{\RequirePackage[all]{xy}}{}


\renewcommand{\thefootnote}{(\roman{footnote})}

\ifthenelse{\boolean{bL}}{
\newcommand{\lan}{$\langle$}
\newcommand{\ran}{$\rangle$}

\newcommand{\ba}{|}
\newcommand{\typ}[1]{\verb|#1\ba}%|
\renewcommand{\=}{\texttt =}
\newcommand{\Ra}{\texttt {=>}}
\newcommand{\La}{\texttt {<=}}
\renewcommand{\-}{\texttt -}
\newcommand{\+}{\texttt +}
\renewcommand{\r}{{$>$}}
\renewcommand{\l}{{$<$}}
\newcommand{\feuil}[2]{#1 : $#2$}
\newcommand{\ffeuil}[3]{#1 : $#2_{f_#3}$}
\renewcommand{\"}[1]{``#1''}
\newcommand{\relations}[1]{\multicolumn{2}{c|}{$(#1)$}}}{}



\DeclareMathAlphabet{\mathpzc}{OT1}{pzc}{m}{it}
\DeclareMathAlphabet{\mathbbm}{U}{bbm}{m}{n}
\newcommand{\Nat}{\mathbbm N}
\newcommand{\Int}{\mathbbm Z}
\newcommand{\Rat}{\mathbbm Q}
\newcommand{\K}{\mathbbm K}
\newcommand{\Cat}{\mathscr{C}}
\newcommand{\Fil}{\mathscr F}
\newcommand{\A}{\mathscr A}
\renewcommand{\P}{\mathscr P}
\ifthenelse{\boolean{bX}}
{\renewcommand{\1}{\mathbf 1}}{\newcommand{\1}{\mathbf 1}}
\newcommand{\0}{\mathbf 0}
\newcommand{\un}{\mathbb 1}
\newcommand{\zero}{\mathbb 0}


\newcommand{\num}{n$^\circ$}




\endinput